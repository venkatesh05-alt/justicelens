<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geo-Tracker - JusticeLensAI</title>
<link href='https://api.mapbox.com/mapbox-gl-js/v2.18.1/mapbox-gl.css' rel='stylesheet' />
<style>
  body, html {
    margin:0; padding:0; height:100%; font-family: Arial, sans-serif; background:#111; color:white;
  }
  header {
    padding:20px; text-align:center; font-size:1.8rem; font-weight:bold; color:#ffb347;
    text-shadow: 2px 2px 8px black; background: rgba(0,0,0,0.7);
  }
  #map { width:100%; height:60vh; margin-top:20px; border-radius:10px; }
  #info { margin-top:20px; font-size:1.2rem; text-align:center; color:#fff; text-shadow:1px 1px 5px black; }
  button { display:block; margin:20px auto; padding:10px 20px; font-size:1rem; border:none; border-radius:8px; background:#ff8c00; color:white; cursor:pointer; }
</style>
</head>
<body>

<header>Geo-Triggered Alerts & Silent SOS ⚖️</header>

<button onclick="trackLocation()">Track My Current Location</button>
<div id="map"></div>
<div id="info">Your location coordinates will appear here.</div>

<script src='https://api.mapbox.com/mapbox-gl-js/v2.18.1/mapbox-gl.js'></script>
<script>
  // Use your token here
  mapboxgl.accessToken = 'pk.eyJ1IjoibWFkaHUwOSIsImEiOiJjbWZ1MWM4ZnkwenJsMmxxeTlycnFhcjVqIn0.XPkaUHkyfVkP9jF5z3_P0A';

  // Initialize map
  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [78.9629, 20.5937], // India center
    zoom: 5
  });

  function trackLocation() {
    const infoDiv = document.getElementById('info');

    if(navigator.geolocation){
      infoDiv.innerHTML = "Fetching your location...";
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;
          infoDiv.innerHTML = `Latitude: ${lat.toFixed(6)}, Longitude: ${lon.toFixed(6)}`;

          map.flyTo({center:[lon,lat], zoom:12});
          
          new mapboxgl.Marker({color:'#ff8c00'})
            .setLngLat([lon, lat])
            .setPopup(new mapboxgl.Popup().setHTML(`<b>Your Current Location</b><br>Lat: ${lat.toFixed(6)}, Lon: ${lon.toFixed(6)}`))
            .addTo(map);

        },
        (err) => { infoDiv.innerHTML = "Error getting location: " + err.message; }
      );
    } else {
      infoDiv.innerHTML = "Geolocation not supported by your browser.";
    }
  }
</script>

</body>
</html>
